<!--
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farming Service</title>
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="static/css/chatbot.css" rel="stylesheet"   />
    <link href="static/css/after_login.css" rel="stylesheet"   />
    <link href="static/css/profile.css" rel="stylesheet"   />
    
</head>

<body>
<div id="dashboardContent" style="display: none;">
    
</div>

    <nav class="navbar navbar-expand-lg mt-3">
        <div class="container">
            <a class="navbar-brand" href="#">
                <div class="farmera-logo"></div>
                <div class="overlay">
                    <div class="farmera-text"></div>
                </div>
                <div class="fullscreen-image"></div>
            </a>
    
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse " id="navbarNav">
                <ul class="navbar-nav mx-auto">
                    
        <li class="nav-item dropdown">
            <a class="nav-link active dropdown-toggle" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Language
            </a>
            <ul class="dropdown-menu" aria-labelledby="languageDropdown">
              <li><a class="dropdown-item" href="#" onclick="changeLanguage('en')">English</a></li>
              <li><a class="dropdown-item" href="#" onclick="changeLanguage('bn')">বাংলা</a></li>
            </ul>
          </li>
                      
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#Services">Services</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="about_us.html">About Us</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="reviews.html">Reviews</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="contact.html">Contact Us</a>
                    </li>
                    
                    <li>
                      <button id="profileButton" class="btnp btn-primary">
                        {% if profile_pic_id %}
                          <img src="{{ url_for('serve_profile_pic', mongo_id=profile_pic_id) }}" 
                               alt="Profile">
                        {% else %}
                          <img src="{{ url_for('static', filename='images/profile.png') }}" alt ="Profile">
                        {% endif %}
                      </button>                                            
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="water-pipe"></div>
    <video id="transitionVideo" autoplay muted style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: -1;">
        <source src="{{ url_for('static', filename='video/login.mp4') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
        <div class="background-wrapper"></div>

    <div id="wrapper-class" class="">

        <section id="Home" class="mar-top">
            <div class="container">
                <div class="row d-flex justify-content-between align-center">
                    <div class="col-lg-6">
                        <p class="mt-5 trusted-maid-service">Growing Success Together</p>
                        <p class="mt-5 tagline">Agritech is the Simplest way to get success in farming <br>with our multiple services...</p>
                        <a href="/read-more" class="read-more-btn">Read More</a>
                    </div>
                </div>
            </div>
        </section>

        
        <section id="Services">
            <div class="container mar-top">
                <h1 class="mb-5 mbagline">OUR FEATURED SERVICES</h1>
                <h3 class="mt-5 mtagline"> Hire Professionals,<br /> Experienced Specifically for your needs</h3>
                <div class="row d-flex justify-content-between">
                    <div class="card" style="width: 18rem;">
                        <img src="./static/images/m1.jpeg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h4 class="card-title">LABOURS</h4>
                            <p class="card-text">Need extra hands on your farm? Let us help! Our hardworking team
                                 offers reliable labor for planting, harvesting, irrigation, and more.
                                  Enjoy the peace of mind knowing your farm is in good hands. Book with us today!</p>
                                  <a href="{{ url_for('book_now', user_name=session['user_name'], location=session['location']) }}" class="btn btn-primary">Book Now</a>

                        </div>
                    </div>

                    <div class="card" style="width: 18rem;">
                        <img src="./static/images/m2.jpeg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h4 class="card-title">TOOLS</h4>
                            <p class="card-text">Looking for reliable tools to boost your farm’s productivity?
                                 We’ve got you covered! Our top-quality rental tools are perfect for planting,
                                  harvesting, irrigation, and more. Reserve your tools today!</p>
                                 <a href="{{ url_for('tools_home', user_name=session['user_name'], location=session['location']) }}" class="btn btn-primary">Book Now</a>

                        </div>
                    </div>
                    <div class="card" style="width: 18rem;">
                        <img src="./static/images/suggetion.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">SUGGETIONS</h5>
                            <p class="card-text"> Starting a specific type of farming?
                                You’ll need quality land, water, the right tools, 
                                and crop management knowledge. Access to labor and 
                                markets is essential for success. Get the right foundation to grow your farm today!</p>
                            <a href="{{ url_for('suggestion_dashboard', user_name=session['user_name'], location=session['location']) }}" class="btn btn-primary">Get Now</a>
                        </div>
                    </div> 
                    
                    <div class="card" style="width: 18rem;">
                        <img src="./static/images/buy_sell.jpg" class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">Buy & sell products</h5>
                            <p class="card-text" href="">Seamlessly buy and sell products with our user-friendly platform. Our marketplace connects buyers and sellers with ease.
                                 Enjoy a hassle-free experience, secure transactions, and a wide variety of products to choose from.</p>
                                <a href="{{ url_for('buy_sell_products', user_name=session['user_name'], location=session['location']) }}" class="btn btn-primary">Go</a>
                        </div>
                </div>
                <div class="card" style="width: 18rem;">
                    <img src="./static/images/recommendation.jpg" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">CROP RECOMMENDATIONS</h5>
                        <p class="card-text">Not sure what to plant? We’
                            ve got you covered! Our smart recommendations help you choose the best crops based on soil,
                             climate, and market demand. Grow smarter, harvest better! 🌱🚜</p>
                             <a href="{{ url_for('dashboard', user_name=session['user_name'], location=session['location']) }}" class="btn btn-primary">Get Now</a>
                    </div>
                </div>

                <div class="card" style="width: 18rem;">
                    <img src="./static/images/crop_disease.jpg" class="card-img-top" alt="...">
                    <div class="card-body">
                        <h5 class="card-title">CropGuard</h5>
                        <p class="card-text">Quickly identify and treat crop diseases with our AI-powered tool.
                             UPLOAD a photo of your crop, get instant diagnosis,
                             and receive tailored treatment recommendations to ensure healthy and thriving plants.</p>
                             <button class="btn btn-primary">Get Now</button>
                    </div>
                </div>
                
                
            </div>
        </section>

        
        <section id="why-choose-us">
            <div class="container">
                <div class="heading">
                    <h1 class="mb-5">Why Choose Us</h1>
                    <img src="./static/images/why_choose_us.jpeg" alt="Company Logo" class="logo">
                </div>
                <div class="reasons">
                    <div class="reason">
                        <img src="./static/images/verify.png" alt="Verification & Assessment">
                        <h3>Verification & Assessment</h3>
                        <p>Employing AI, we enhance our rigorous physical and telephonic verification processes to ensure the highest quality assessments of our labours.</p>
                    </div>
                    <div class="reason">
                        <img src="./static/images/transpart_pricing.png" alt="Transparent Pricing">
                        <h3>Transparent Pricing</h3>
                        <p>You get what you pay for. Additionally, you get a replacement guarantee, verification documents, and more!</p>
                    </div>
                    <div class="reason">
                        <img src="./static/images/Customer_support.png" alt="Customer Support">
                        <h3>Customer Support</h3>
                        <p>Our executives will always be there to hear you out and solve your issues.</p>
                    </div>
                    <div class="reason">
                      <img src="./static/images/language.png" alt="Customer Support">
                      <h3>Multiple languages</h3>
                      <p>Our services support multiple languages, ensuring accessibility and convenience for a global audience.
                      </p>
                  </div>
                </div>
            </div>
        </section>

        
        <div class="slider">
            <div class="item">
                <img src="{{ url_for('static', filename='images/H_1.jpeg') }}" alt="Image 1">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/H_2.jpeg') }}" alt="Image 2">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/H_3.jpeg') }}" alt="Image 3">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/H_4.jpeg') }}" alt="Image 4">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/H_5.jpeg') }}" alt="Image 5">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/H_6.jpeg') }}" alt="Image 6">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/H_7.jpeg') }}" alt="Image 7">
            </div>
            <button id="next">&gt;</button>
            <button id="prev">&lt;</button>
        </div>

        
        <div class="map-embed">
            <h2 class="map-heading">You can also reach us nearby your location</h2>
        </div>
        <div class="map-container mt-4">
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d315077.123456789!2d73.123456!3d22.123456!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1234567890abcdef%3A0x1234567890abcdef!2sParul%20University%2C%20Vadodara%2C%20Gujarat%2C%20India!5e0!3m2!1sen!2sbd!4v1603794290143!5m2!1sen!2sbd"
                class="map-frame" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
                <div class="border-animation"></div>
        </div>

        
        <br><br> <br> <br> <br> <br>
        <footer> <span>
                <div class="footer-content">
                    <div class="contact">
                        <h3>Contact Us</h3>
                        <ul>
                            <li><i class="bi bi-envelope"></i> Email: agritechsolutions@gmail.com</li>
                            <li><i class="bi bi-phone"></i> Phone: +123 456 7890</li>
                            <li><i class="bi bi-geo-alt"></i> Address: Vadodara, Gujarat, India</li>
                        </ul>
                    </div>
                    <div class="links">
                        <h3>Quick Links</h3>
                        <ul>
                            <li><a href="about_us.html">About Us</a></li>
                            <li><a href="contact.html">Contact Us</a></li>
                            <li><a href="privacyPolicy.html">Privacy Policy</a></li>
                            <li><a href="TermsOfServices.html">Terms of Service</a></li>
                            <li><a href="tearmsAndConditionCustomer.html">Terms and condition for Customer </a></li>
                            <li><a href="tearmsAndConditionMaid.html">Terms and condition for labours</a></li>
                            <li><a href="services.html">Our Services</a></li>
                        </ul>
                    </div>
                    <div class="social-media">
                        <h3>Follow Us</h3>
                        <ul>
                            <li><a href="https://facebook.com" target="_blank"><i class="bi bi-facebook"></i> Facebook</a></li>
                            <li><a href="https://twitter.com" target="_blank"><i class="bi bi-twitter"></i> Twitter</a></li>
                            <li><a href="https://instagram.com" target="_blank"><i class="bi bi-instagram"></i> Instagram</a></li>
                        </ul>
                    </div>
                </div>
            </span>
        </footer>

          
    <button id="chatbot-button">💬</button>

    
    <div id="chatbot-window" class="chatbot-window"
        style="display: none; position: fixed; bottom: 80px; right: 20px; width: 300px; background-color: white; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); padding: 10px;">
        <div id="chatbot-header"
            style="font-size: 18px; font-weight: bold; padding: 10px; background-color: #007bff; color: white; border-radius: 8px 8px 0 0;">
            Service Chatbot
        </div>
        <div id="chatbot-messages"
            style="overflow-y: auto; max-height: 250px; margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
            
        </div>
        <input id="chatbot-input" type="text" placeholder="Ask me anything..."
            style="width: 100%; margin-bottom:55px; padding: 10px; border-radius: 8px; border: 1px solid #ddd;">
        <button id="send-message" class="btn btn-primary"
            style="width: 100%; border-radius: 8px; margin-top: 5px;">Send</button>
    </div>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script>
        document.querySelector('.read-more-btn').addEventListener('click', function () {
            var content = document.querySelector('.content');
            if (content.style.display === 'none') {
                content.style.display = 'block';
                this.textContent = 'Read Less'; 
            } else {
                content.style.display = 'none';
                this.textContent = 'Read More'; 
            }
        });
    </script>
  
  <div id="profilePopup" class="popup">
    <div class="popup-content profile-popup-box">
      <button id="closePopup" class="btn-close" aria-label="Close">&times;</button>
      <div class="row g-0">
        
        <div class="col-md-8 d-flex flex-column justify-content-center p-4 bg-light">
          <div class="mb-3">
            <label class="form-label">🧑‍💼 Name</label>
            <input type="text" class="form-control" value="{{ session['user_name'] }}" readonly>
          </div>
  
          <div class="mb-3">
            <label class="form-label">📞 Phone Number</label>
            <input type="text" class="form-control" value="{{ session['phone_no'] }}" readonly>
          </div>
  
          <div class="mb-3">
            <label class="form-label">📧 Email</label>
            <input type="email" class="form-control" value="{{ session['email'] }}" readonly>
          </div>
  
          <div class="mb-4">
            <label class="form-label">🗺 Location</label>
            <input type="text" class="form-control" value="{{ session['location'] }}" readonly>
          </div>
  
          <div class="button-row">
            <button class="btnch btn-outline-secondary" id="openChangePassword">Change Password</button>
            <a href="/maid.html" class="btnr btn-outline-primary">Register as Labour</a>
          </div>
        </div>
  
        
        <div class="col-md-4 d-flex flex-column align-items-center justify-content-center p-4" style="background: linear-gradient(145deg,rgb(220, 223, 205),rgb(179, 216, 228));; border-left=10px solid rgb(255, 251, 244);">
          <div class="profile-photo-wrapper mb-3">
            {% if profile_pic_id %}
            <img src="{{ url_for('serve_profile_pic', mongo_id=profile_pic_id) }}" alt="Profile" class="rounded-circle">
            {% else %}
            <img src="{{ url_for('static', filename='images/profile.png') }}" alt="Profile" class="rounded-circle">
            {% endif %}
          </div>
          <a href="/logout" class="button-danger">Logout</a>
        </div>
      </div>
    </div>
  </div>
  
  
  <div id="changePasswordPopup" class="popup" style="display: none;">
    <div class="popup-content">
      <button id="closePasswordPopup" class="btn-close" aria-label="Close"></button>
      <div class="container">
        <h4 class="text-center mb-4">Change Password</h4>
        <form method="POST" action="{{ url_for('change_password') }}">
          <div class="mb-3">
            <label class="form-label">Current Password</label>
            <input type="password" class="form-control" name="current_password" required>
          </div>

          <div class="mb-3">
            <label class="form-label">New Password</label>
            <input type="password" class="form-control" id="newPassword" name="new_password" required oninput="checkPasswordStrength(this.value); checkPasswordMatch();">
            <div id="passwordGuide" class="form-text text-muted mt-1">
              Use at least 8 characters. Mix uppercase and lowercase letters, numbers, and special characters (e.g., @, #, $, %).<br>
              * Do not use your phone number as a password.<br>
              * Do not use the same password for multiple accounts.
            </div>            
            <div id="passwordHelp" class="form-text mt-1 fw-bold"></div>
          </div>
          
          <div class="mb-3">
            <label class="form-label">Confirm Password</label>
            <input type="password" class="form-control" id="confirmPassword" name="confirm_password" required oninput="checkPasswordMatch();">
            <div id="confirmHelp" class="form-text mt-1 fw-bold"></div>
          </div>

          <div class="text-end mb-3">
            <a href="/forgot_password" class="text-decoration-none">Forgot Password?</a>
          </div>
          <button type="submit" class="btnch btn-success w-100">Update Password</button>
        </form>
      </div>
    </div>
  </div>

  
<div id="forgotPasswordPopupEmail" class="popup" style="display: none;">
    <div class="popup-content">
      <button class="btn-close" onclick="closeForgotPopups()"></button>
      <h4 class="text-center mb-3">Forgot Password</h4>
      <div class="mb-3">
        <label class="form-label">📧 Enter your registered email</label>
        <input type="email" id="forgotEmail" class="form-control" required>
        <div id="emailGuide" class="form-text text-muted mt-1">
          Please enter the email address associated with your account (e.g., customer@gmail.com).<br>
          * If you don't remember your email, please contact our support team.<br>
          * If you have multiple accounts, enter the email linked to the account you want to reset.<br>
          * Do not tap the "Send Verification" button multiple times.<br>
          * After sending the verification code, check your inbox (and also check the spam/junk folder).
        </div>
        
      </div>
      <button id="sendCodeBtn" class="btnch btn-primary w-100" onclick="sendResetCode()">
        <span class="btn-text">Send Verification Code</span>
        <span class="loading-spinner" style="display: none;"></span>
      </button>
    </div>
  </div>
  
  
  <div id="forgotPasswordPopupCode" class="popup" style="display: none;">
    <div class="popup-content">
      <button class="btn-close" onclick="closeForgotPopups()"></button>
      <h4 class="text-center mb-3">Verify Code</h4>
      <div class="mb-3">
        <label class="form-label">🔑 Enter the code sent to your email</label>
        <input type="text" id="verificationCode" class="form-control" required>
      </div>
      <button class="btnp btn-success w-100" onclick="verifyResetCode()">Verify</button>
    </div>
  </div>
  
  
  <div id="forgotPasswordPopupReset" class="popup" style="display: none;">
    <div class="popup-content">
      <button class="btn-close" onclick="closeForgotPopups()"></button>
      <h4 class="text-center mb-3">Reset Password</h4>

      <div class="mb-3">
        <label class="form-label">🔐 New Password</label>
        <input type="password" id="newPass" class="form-control" required oninput="checkPasswordStrength(this.value);">
        
        
        <div id="passwordHelp" class="form-text mt-1 fw-Light"></div>
      
        
        <div id="passwordGuide" class="form-text text-muted mt-1">
          Use at least 8 characters. Mix uppercase and lowercase letters, numbers, and special characters (e.g., @, #, $, %).<br>
          * Do not use your phone number as a password.<br>
          * Do not use the same password for multiple accounts.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label">🔁 Confirm Password</label>
        <input type="password" id="confirmPass" class="form-control" required>
      </div>
      <button class="btnch btn-success w-100" onclick="resetForgotPassword()">Reset Password</button>
    </div>
  </div>
  

  <script>
    
    function changeLanguage(lang) {
        if (lang === 'en') {
          window.location.href = "{{ url_for('after_login_dashboard') }}";
        } else if (lang === 'bn') {
          window.location.href = "{{ url_for('after_login_dashboard_ben') }}";
        }
      }
    
      
    
    const modal = document.getElementById("profilePopup");
    const openButton = document.getElementById("profileButton");
    const closeButton = document.getElementById("closePopup");
  
    openButton.onclick = () => modal.style.display = "block";
    closeButton.onclick = () => modal.style.display = "none";
  
    
    const changePasswordPopup = document.getElementById("changePasswordPopup");
    const openChangeBtn = document.getElementById("openChangePassword");
    const closeChangeBtn = document.getElementById("closePasswordPopup");
  
    openChangeBtn.onclick = () => changePasswordPopup.style.display = "block";
    closeChangeBtn.onclick = () => changePasswordPopup.style.display = "none";
  
    
    window.onclick = function (event) {
      if (event.target === modal) modal.style.display = "none";
      if (event.target === changePasswordPopup) changePasswordPopup.style.display = "none";
    };
  
    
    const changeForm = document.querySelector("#changePasswordPopup form");
    changeForm.onsubmit = async function (e) {
      e.preventDefault();
  
      const formData = new FormData(changeForm);
      const response = await fetch("{{ url_for('change_password') }}", {
        method: "POST",
        body: formData,
      });
  
      const result = await response.json();
      let messageColor = result.status === "success" ? "green" : "red";
  
      
      const msgBox = document.createElement("div");
      msgBox.textContent = result.message;
      msgBox.style.color = messageColor;
      msgBox.style.marginBottom = "10px";
      changeForm.prepend(msgBox);
  
      if (result.status === "success") {
        changeForm.reset();
        setTimeout(() => {
          changePasswordPopup.style.display = "none";
          msgBox.remove();
        }, 2000);
      } else {
        setTimeout(() => msgBox.remove(), 3000);
      }
    };

        const forgotEmailPopup = document.getElementById("forgotPasswordPopupEmail");
        const forgotCodePopup = document.getElementById("forgotPasswordPopupCode");
        const forgotResetPopup = document.getElementById("forgotPasswordPopupReset");
      
        function openForgotPopup() {
          closeForgotPopups();
          forgotEmailPopup.style.display = "block";
        }
      
        function closeForgotPopups() {
          forgotEmailPopup.style.display = "none";
          forgotCodePopup.style.display = "none";
          forgotResetPopup.style.display = "none";
        }
      
        async function sendResetCode() {
          const email = document.getElementById("forgotEmail").value.trim();
          const button = document.getElementById("sendCodeBtn");
          const btnText = button.querySelector(".btn-text");
          const spinner = button.querySelector(".loading-spinner");
        
          
          button.disabled = true;
          btnText.style.display = "none";
          spinner.style.display = "inline-block";
        
          try {
            const res = await fetch("/forgot_password_code_send", {
              method: "POST",
              headers: { "Content-Type": "application/x-www-form-urlencoded" },
              body: email=${encodeURIComponent(email)}
            });
        
            const data = await res.json();
            alert(data.message);
        
            if (data.status === "success") {
              forgotEmailPopup.style.display = "none";
              forgotCodePopup.style.display = "block";
            } else {
              
              button.disabled = false;
              btnText.style.display = "inline";
              spinner.style.display = "none";
            }
          } catch (err) {
            alert("Something went wrong!");
            button.disabled = false;
            btnText.style.display = "inline";
            spinner.style.display = "none";
          }
        }
      
        async function verifyResetCode() {
          const code = document.getElementById("verificationCode").value.trim();
          const res = await fetch("/forgot_password_code_verify", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: code=${encodeURIComponent(code)}
          });
          const data = await res.json();
          alert(data.message);
          if (data.status === "success") {
            forgotCodePopup.style.display = "none";
            forgotResetPopup.style.display = "block";
          }
        }
      
        async function resetForgotPassword() {
          const newPass = document.getElementById("newPass").value;
          const confirmPass = document.getElementById("confirmPass").value;
      
          const res = await fetch("/forgot_password_code_reset", {
            method: "POST",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            body: new_password=${encodeURIComponent(newPass)}&confirm_password=${encodeURIComponent(confirmPass)}
          });
          const data = await res.json();
          alert(data.message);
          if (data.status === "success") {
            closeForgotPopups();
          }
        }
      
        
        document.querySelector("a[href='/forgot_password']").addEventListener("click", function(e) {
          e.preventDefault();
          openForgotPopup();
        });
      
  </script>  
  <script>
    function checkPasswordStrength(password) {
      const helpText = document.getElementById("passwordHelp");
    
      let strength = 0;
    
      if (password.length >= 8) strength++;
      if (/[a-z]/.test(password) && /[A-Z]/.test(password)) strength++;
      if (/\d/.test(password)) strength++;
      if (/[^A-Za-z0-9]/.test(password)) strength++;
    
      if (password.length === 0) {
        helpText.textContent = '';
      } else {
        if (strength < 2) {
          helpText.textContent = 'Weak – Use more characters and add a mix of letters, numbers & symbols.';
          helpText.style.color = 'red';
        } else if (strength < 4) {
          helpText.textContent = '⚠ Moderate – Getting better! Add more variety to strengthen it.';
          helpText.style.color = 'orange';
        } else {
          helpText.textContent = '✅ Strong password!';
          helpText.style.color = 'green';
        }
      }
    }

  function checkPasswordMatch() {
    const password = document.getElementById("newPassword").value;
    const confirm = document.getElementById("confirmPassword").value;
    const confirmHelp = document.getElementById("confirmHelp");

    if (confirm.length === 0) {
      confirmHelp.textContent = '';
    } else if (password === confirm) {
      confirmHelp.textContent = 'Passwords match';
      confirmHelp.style.color = 'green';
    } else {
      confirmHelp.textContent = 'Passwords do not match';
      confirmHelp.style.color = 'red';
    }
  }
</script>
<script src="static/js/script.js"></script>
<script src="static/js/chatbot.js"></script>
<script src="static/js/logo.js"></script>
<script src="static/js/slider.js"></script> 
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farming Service</title>
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="static/css/chatbot.css" rel="stylesheet"   />
    <link href="static/css/profile.css" rel="stylesheet"/>
    <link href="static/css/button.css" rel="stylesheet"/>
    <link href="static/css/succesfull_login.css" rel="stylesheet"/>    
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
    @import url("https://fonts.googleapis.com/css2?family=Recursive&display=swap");
    </style>
</head>
<body>
    <div class="tittle-shadow">
        <div class="tilted-background" data-aos="fade-left"> </div>
        <div class="cube-back"> </div>
        <div class="reflection"> </div>
    </div>    
    <div id="navbar-container">
        <nav class="navbar navbar-expand-lg mt-3">
            <div class="container">
                <a class="navbar-brand" href="#">
                    <div class="farmera-logo"></div>
                    <div class="overlay">
                        <div class="farmera-text"></div>
                    </div>
                    <div class="fullscreen-image"></div>
                </a>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav mx-auto stylish-navbar">
                      <li class="nav-item">
                        <a class="nav-link" href="#Services">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                               viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                               stroke-linecap="round" stroke-linejoin="round" class="feather feather-briefcase">
                            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
                            <path d="M16 3h-8a2 2 0 0 0-2 2v2h12V5a2 2 0 0 0-2-2z"></path>
                          </svg>
                          <span>Services</span>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="about_us.html">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                               viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                               stroke-linecap="round" stroke-linejoin="round" class="feather feather-users">
                            <path d="M17 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M7 21v-2a4 4 0 0 1 3-3.87"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                            <path d="M6 17a6 6 0 0 1 12 0v4"></path>
                          </svg>
                          <span>About Us</span>
                        </a>
                      </li>                 
                      <li class="nav-item">
                        <a class="nav-link" href="reviews.html">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                               viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                               stroke-linecap="round" stroke-linejoin="round" class="feather feather-star">
                            <polygon points="12 2 15 8 22 9 17 14 18 21 12 17 6 21 7 14 2 9 9 8 12 2"></polygon>
                          </svg>
                          <span>Reviews</span>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="contact.html">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                               viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                               stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                            <polyline points="22,6 12,13 2,6"></polyline>
                          </svg>
                          <span>Contact</span>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#languageModal">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" class="feather feather-globe me-1">
                          <circle cx="12" cy="12" r="10" />
                          <line x1="2" y1="12" x2="22" y2="12" />
                          <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                          </svg>
                        <span>{{ g.t['language'] }}</span>
                        </a>
                      </li>
                      <div class="tick-line"></div>
                    </ul>
                    <a class="nav-item profile-nav">
                        <button id="profileButton" class="btnp btn-primary">
                          {% if profile_pic_id %}
                            <img src="{{ url_for('serve_profile_pic', mongo_id=profile_pic_id) }}" alt="Profile">
                          {% else %}
                            <img src="{{ url_for('static', filename='images/profile.svg') }}" alt="Profile">
                          {% endif %}
                        </button>
                    </a>
                   
                  </div>
            </div>
        </nav>
        </div>
        </nav>
    </div>
    <div class="flicker-overlay" id="flickerOverlay"></div>

<div class="scene" id="scene">
  <div class="cube" id="cube"></div>
</div>
        <!-- Home -->
        <section id="Home" class="mar-top" style="position: relative; z-index: 10; text-align: center; margin-top: 30px;">
            <div class="container">
                <div class="row d-flex justify-content-between align-center">
                    <div class="col-lg-8">
                        <h1 class="glow-text1">Growing</h1>
                        <h2 class="glow-text2">Success Together</h2>
                    </div>
                </div>
            </div>
        </section>
        <section id="promotion" class="mar-top" style="position: relative; z-index: 10; text-align: center; margin-top: 47px;" data-aos="fade-left">
            <div class="container">
                <div class="row d-flex justify-content-between align-center">
                    <div class="col-lg-7">
                        <p class="mt-5 tagline">Agritech is the Simplest way to get success in farming <br>with our multiple services...</p>
                        <a href="/read-more" class="read-more-btn">Read More</a>
                    </div>
                </div>
            </div>
        </section>
    <section id="Services" data-aos="fade">
        <div class="container mar-top">
            <div class="ribbon">
                <div class="ribbon-stitches-top"></div>
                <div class="ribbon-content"><p><b>Offering Smart Agricultural Solutions by Experts Tailored to Your Needs</b></p></div>
                <div class="ribbon-stitches-bottom"></div>
        </div>
        <div class="row d-flex justify-content-between">
            <div class="card">
                <div class="ribbon-card"><span>agritech</span></div>
                <div class="image-stitch-wrapper">
                    <img src="./static/images/m1.jpeg" class="card-img-top" alt="...">
                </div>                  
                        <div class="card-body">
                            <h4 class="card-title">LABOURS</h4>
                            <p class="card-text">Need extra hands on your farm? Let us help! Our hardworking team
                                 offers reliable labor for planting, harvesting, irrigation, and more.
                                  Enjoy the peace of mind knowing your farm is in good hands. Book with us today!</p>
                                  <a href="{{ url_for('book_now', user_name=session['user_name'], location=session['location']) }}" class="btnservice">Book Now</a>
                        </div>
                    </div>
                    <div class="card" style="width: 18rem;">
                        <div class="ribbon-card"><span>agritech</span></div>
                        <div class="image-stitch-wrapper">
                            <img src="./static/images/m2.jpeg" class="card-img-top" alt="...">
                        </div>   
                        <div class="card-body">
                            <h4 class="card-title">TOOLS</h4>
                            <p class="card-text">Looking for reliable tools to boost your farm’s productivity?
                                 We’ve got you covered! Our top-quality rental tools are perfect for planting,
                                  harvesting, irrigation, and more. Reserve your tools today!</p>
                                  <a href="{{ url_for('tools_home', user_name=session['user_name'], location=session['location']) }}" class="btnservice">Book Now</a>
                        </div>
                    </div>
                    <div class="card" style="width: 18rem;">
                        <div class="ribbon-card"><span>agritech</span></div>
                        <div class="image-stitch-wrapper">
                            <img src="./static/images/suggetion.jpg" class="card-img-top" alt="...">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">SUGGETIONS</h5>
                            <p class="card-text"> Starting a specific type of farming?
                                You’ll need quality land, water, the right tools, and crop management knowledge.
                                 Get the right foundation to grow your farm today!</p>
                                 <a href="{{ url_for('suggestion_dashboard', user_name=session['user_name'], location=session['location']) }}" class="btnservice">Get Now</a>
                        </div>
                    </div>
                    <div class="card" style="width: 18rem;">
                        <div class="ribbon-card"><span>agritech</span></div>                     
                        <div class="image-stitch-wrapper">
                            <img src="./static/images/buy_sell.jpg" class="card-img-top" alt="...">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">Buy & sell products</h5>
                            <p class="card-text" href="">Seamlessly buy and sell products with our platform.
                                  We connects buyers and sellers with ease.
                                  Enjoy a hassle-free experience,
                                  and a wide variety of products to choose from.</p>
                                  <a href="{{ url_for('buy_sell_products', user_name=session['user_name'], location=session['location']) }}" class="btnservice">Go</a>
                        </div>
                </div>
                    <div class="card" style="width: 18rem;">
                        <div class="ribbon-card"><span>agritech</span></div>
                        <div class="image-stitch-wrapper">
                            <img src="./static/images/recommendation.jpg" class="card-img-top" alt="...">
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">CROP RECOMMENDATION</h5>
                            <p class="card-text">Not sure what to plant? We’
                                ve got you covered! Our smart recommendations help you choose the best crops based on soil,
                                 climate, and market demand. Grow smarter, harvest better! 🌱🚜</p>
                                 <a href="{{ url_for('dashboard', user_name=session['user_name'], location=session['location']) }}" class="btnservice">Get Now</a>
                        </div>
                    </div>
                    <div class="card" style="width: 18rem;">
                        <div class="ribbon-card"><span>agritech</span></div>
                        <div class="image-stitch-wrapper">
                            <img src="./static/images/crop_disease.jpg" class="card-img-top" alt="...">
                        </div>                      
                        <div class="card-body">
                            <h5 class="card-title">CropGuard</h5>
                            <p class="card-text">Quickly identify and treat crop diseases with our AI-powered tool.
                                 UPLOAD a photo of your crop, get instant diagnosis,
                                 and receive tailored treatment recommendations to ensure healthy and thriving plants.</p>
                                 <button class="btnservice">Get Now</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="why-choose-us" data-aos="fade">
            <div class="container_promo">
              <div class="heading">
                <h1 class="mb-5">Why Choose Us</h1>
                <span class="qm-symbol">?</span>
              </div>
              <div class="reasons">
                <div class="reason">
                  <div class="pin">
                    <img src="./static/images/pin.png" alt="Pin">
                  </div>
                  <img src="./static/images/verify.png" alt="Verification & Assessment">
                  <h3>Verification & Assessment</h3>
                  <p>
                    Employing AI, we enhance our rigorous physical and telephonic verification processes to ensure the highest quality assessments of our labours.
                  </p>
                </div>
                <div class="reason">
                  <div class="pin">
                    <img src="./static/images/pin.png" alt="Pin">
                  </div>
                  <img src="./static/images/transpart_pricing.png" alt="Transparent Pricing">
                  <h3>Transparent Pricing</h3>
                  <p>
                    You get what you pay for. Additionally, you get a replacement guarantee, verification documents, and more!
                  </p>
                </div>
                <div class="reason">
                  <div class="pin">
                    <img src="./static/images/pin.png" alt="Pin">
                  </div>
                  <img src="./static/images/Customer_support.png" alt="Customer Support">
                  <h3>Customer Support</h3>
                  <p>
                    Our team will always be there to hear you out and solve your issues.
                  </p>
                </div>
                <div class="reason">
                  <div class="pin">
                    <img src="./static/images/pin.png" alt="Pin">
                  </div>
                  <img src="./static/images/language.png" alt="Multiple Languages">
                  <h3>Multiple Languages</h3>
                  <p>
                    Our services support multiple languages, ensuring accessibility and convenience for a global audience.
                  </p>
                </div>
              </div>
            </div>
          </section>



          <div class="slider">
            <div class="item">
                <img src="{{ url_for('static', filename='images/bg.jpg') }}" alt="Image 1">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/bg1.jpg') }}" alt="Image 2">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/bg2.jpg') }}" alt="Image 3">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/bg3.jpg') }}" alt="Image 4">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/bg4.jpg') }}" alt="Image 5">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/bg6.jpg') }}" alt="Image 6">
            </div>
            <div class="item">
                <img src="{{ url_for('static', filename='images/bg7.jpg') }}" alt="Image 7">
            </div>
            <!--<button id="next">&gt;</button>
            <button id="prev">&lt;</button>-->
        </div>


<div class="map-embed">
  <div class="map-ribbon">
    <div class="map-ribbon-stitches-top"></div>
    <div class="map-ribbon-content">
      <svg>
        <text x="50%" y="50%" dy=".35em" text-anchor="middle">
          YOU CAN ALSO REACH US NEARBY YOUR LOCATION
        </text>
      </svg>
    </div>
    <div class="map-ribbon-stitches-bottom"></div>
  </div>
</div>

        <div class="map-container mt-4">
            <iframe 
                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d315077.123456789!2d73.123456!3d22.123456!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x1234567890abcdef%3A0x1234567890abcdef!2sParul%20University%2C%20Vadodara%2C%20Gujarat%2C%20India!5e0!3m2!1sen!2sbd!4v1603794290143!5m2!1sen!2sbd"
                class="map-frame" allowfullscreen="" aria-hidden="false" tabindex="0"></iframe>
                <div class="border-animation"></div>
        </div>

        <footer class="footer">
            <div class="footer-container">
                <div class="footer-section">
                    <h4>Contact Us</h4>
                    <ul>
                        <li><strong>Email:</strong> arnabbhunia1609@gmail.com</li>
                        <li><strong>Phone:</strong> +123 456 7890</li>
                        <li><strong>Location:</strong> Vadodara, Gujarat, India</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="privacyPolicy.html">Privacy Policy</a></li>
                        <li><a href="TermsOfServices.html">Terms of Service</a></li>
                        <li><a href="tearmsAndConditionCustomer.html">Customer Terms</a></li>
                        <li><a href="tearmsAndConditionMaid.html">Labour Terms</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Follow Us</h4>
                    <ul>
                        <li><a href="https://facebook.com" target="_blank"><i class="bi bi-facebook"></i> Facebook</a></li>
                        <li><a href="https://twitter.com" target="_blank"><i class="bi bi-twitter"></i> Twitter</a></li>
                        <li><a href="https://instagram.com" target="_blank"><i class="bi bi-instagram"></i> Instagram</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Agitech Solutions. All rights reserved. Developed by Agitech Solutions Development Team.</p>
            </div>
        </footer>
        <!-- Profile Option -->
<div id="profilePopup" class="popup">
  <div class="popup-content profile-popup-box">
    <button id="closePopup" class="btn-close" aria-label="Close">&times;</button>

    <div class="profile-container">

      <!-- Left: Profile Details -->
      <div class="profile-left">
        <div class="form-group">
          <label class="form-label">🧑‍💼 Name</label>
          <input type="text" class="form-control" value="{{ session['user_name'] }}" readonly>
        </div>

        <div class="form-group">
          <label class="form-label">📞 Phone Number</label>
          <input type="text" class="form-control" value="{{ session['phone_no'] }}" readonly>
        </div>

        <div class="form-group">
          <label class="form-label">📧 Email</label>
          <input type="email" class="form-control" value="{{ session['email'] }}" readonly>
        </div>

        <div class="form-group">
          <label class="form-label">🗺 Location</label>
          <input type="text" class="form-control" value="{{ session['location'] }}" readonly>
        </div>

        <div class="button-row">
          <button class="btnch" id="openChangePassword">Change Password</button>
          <a href="/maid.html" class="btnr">Register as Labour</a>
        </div>
      </div>

      <!-- Right: Image + Logout -->
      <div class="profile-right">
        <div class="profile-photo-wrapper">
          {% if profile_pic_id %}
            <img src="{{ url_for('serve_profile_pic', mongo_id=profile_pic_id) }}" alt="Profile" class="rounded-circle">
          {% else %}
            <img src="{{ url_for('static', filename='images/profile.svg') }}" alt="Profile" class="rounded-circle">
          {% endif %}
        </div>
        <a href="/logout" class="button-danger">Logout</a>
      </div>

    </div>
  </div>
</div>

        
        <div id="changePasswordPopup" class="popup" style="display: none;">
          <div class="popup-content">
            <button id="closePasswordPopup" class="btn-close" aria-label="Close"></button>
            <div class="container">
              <h4 class="text-center mb-4">Change Password</h4>
              <form method="POST" action="{{ url_for('change_password') }}">
                <div class="mb-3">
                  <label class="form-label">Current Password</label>
                  <input type="password" class="form-control" name="current_password" required>
                </div>
      
                <div class="mb-3">
                  <label class="form-label">New Password</label>
                  <input type="password" class="form-control" id="newPassword" name="new_password" required oninput="checkPasswordStrength(this.value); checkPasswordMatch();">
                  <div id="passwordGuide" class="form-text text-muted mt-1">
                    Use at least 8 characters. Mix uppercase and lowercase letters, numbers, and special characters (e.g., @, #, $, %).<br>
                    * Do not use your phone number as a password.<br>
                    * Do not use the same password for multiple accounts.
                  </div>            
                  <div id="passwordHelp" class="form-text mt-1 fw-bold"></div>
                </div>
                
                <div class="mb-3">
                  <label class="form-label">Confirm Password</label>
                  <input type="password" class="form-control" id="confirmPassword" name="confirm_password" required oninput="checkPasswordMatch();">
                  <div id="confirmHelp" class="form-text mt-1 fw-bold"></div>
                </div>
      
                <div class="text-end mb-3">
                  <a href="/forgot_password" class="text-decoration-none">Forgot Password?</a>
                </div>
                <button type="submit" class="btnch btn-success w-100">Update Password</button>
              </form>
            </div>
          </div>
        </div>
      
      <div id="forgotPasswordPopupEmail" class="popup" style="display: none;">
          <div class="popup-content">
            <button class="btn-close" onclick="closeForgotPopups()"></button>
            <h4 class="text-center mb-3">Forgot Password</h4>
            <div class="mb-3">
              <label class="form-label">📧 Enter your registered email</label>
              <input type="email" id="forgotEmail" class="form-control" required>
              <div id="emailGuide" class="form-text text-muted mt-1">
                Please enter the email address associated with your account (e.g., customer@gmail.com).<br>
                * If you don't remember your email, please contact our support team.<br>
                * If you have multiple accounts, enter the email linked to the account you want to reset.<br>
                * Do not tap the "Send Verification" button multiple times.<br>
                * After sending the verification code, check your inbox (and also check the spam/junk folder).
              </div>
              
            </div>
            <button id="sendCodeBtn" class="btnch btn-primary w-100" onclick="sendResetCode()">
              <span class="btn-text">Send Verification Code</span>
              <span class="loading-spinner" style="display: none;"></span>
            </button>
          </div>
        </div>
        
      
        <div id="forgotPasswordPopupCode" class="popup" style="display: none;">
          <div class="popup-content">
            <button class="btn-close" onclick="closeForgotPopups()"></button>
            <h4 class="text-center mb-3">Verify Code</h4>
            <div class="mb-3">
              <label class="form-label">🔑 Enter the code sent to your email</label>
              <input type="text" id="verificationCode" class="form-control" required>
            </div>
            <button class="btnp btn-success w-100" onclick="verifyResetCode()">Verify</button>
          </div>
        </div>
        
      
        <div id="forgotPasswordPopupReset" class="popup" style="display: none;">
          <div class="popup-content">
            <button class="btn-close" onclick="closeForgotPopups()"></button>
            <h4 class="text-center mb-3">Reset Password</h4>
      
            <div class="mb-3">
              <label class="form-label">🔐 New Password</label>
              <input type="password" id="newPass" class="form-control" required oninput="checkPasswordStrength(this.value);">
      
              <div id="passwordHelp" class="form-text mt-1 fw-Light"></div>
            
              <div id="passwordGuide" class="form-text text-muted mt-1">
                Use at least 8 characters. Mix uppercase and lowercase letters, numbers, and special characters (e.g., @, #, $, %).<br>
                * Do not use your phone number as a password.<br>
                * Do not use the same password for multiple accounts.
              </div>
            </div>
      
            <div class="mb-3">
              <label class="form-label">🔁 Confirm Password</label>
              <input type="password" id="confirmPass" class="form-control" required>
            </div>
            <button class="btnch btn-success w-100" onclick="resetForgotPassword()">Reset Password</button>
          </div>
        </div>



        <!-- Language Modal -->
<div class="modal fade" id="languageModal" tabindex="-1" aria-labelledby="languageModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="languageModalLabel">{{ g.t['select_language'] }}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <button class="btnlang btn-outline-primary w-100" onclick="changeLanguage('en')">ENGLISH</button>
        <button class="btnlang btn-outline-primary w-100" onclick="changeLanguage('bn')">বাংলা</button>
      </div>
    </div>
  </div>
</div>






        <script>
        function changeLanguage(lang) {
        fetch(/set_language/${lang})
        .then(() => {
        location.reload(); // Reload to reflect language change
        });
        }


          
          const modal = document.getElementById("profilePopup");
          const openButton = document.getElementById("profileButton");
          const closeButton = document.getElementById("closePopup");
        
          openButton.onclick = () => modal.style.display = "block";
          closeButton.onclick = () => modal.style.display = "none";
        
          
          const changePasswordPopup = document.getElementById("changePasswordPopup");
          const openChangeBtn = document.getElementById("openChangePassword");
          const closeChangeBtn = document.getElementById("closePasswordPopup");
        
          openChangeBtn.onclick = () => changePasswordPopup.style.display = "block";
          closeChangeBtn.onclick = () => changePasswordPopup.style.display = "none";
        
          
          window.onclick = function (event) {
            if (event.target === modal) modal.style.display = "none";
            if (event.target === changePasswordPopup) changePasswordPopup.style.display = "none";
          };
        
          
          const changeForm = document.querySelector("#changePasswordPopup form");
          changeForm.onsubmit = async function (e) {
            e.preventDefault();
        
            const formData = new FormData(changeForm);
            const response = await fetch("{{ url_for('change_password') }}", {
              method: "POST",
              body: formData,
            });
        
            const result = await response.json();
            let messageColor = result.status === "success" ? "green" : "red";
        
            
            const msgBox = document.createElement("div");
            msgBox.textContent = result.message;
            msgBox.style.color = messageColor;
            msgBox.style.marginBottom = "10px";
            changeForm.prepend(msgBox);
        
            if (result.status === "success") {
              changeForm.reset();
              setTimeout(() => {
                changePasswordPopup.style.display = "none";
                msgBox.remove();
              }, 2000);
            } else {
              setTimeout(() => msgBox.remove(), 3000);
            }
          };
      
              const forgotEmailPopup = document.getElementById("forgotPasswordPopupEmail");
              const forgotCodePopup = document.getElementById("forgotPasswordPopupCode");
              const forgotResetPopup = document.getElementById("forgotPasswordPopupReset");
            
              function openForgotPopup() {
                closeForgotPopups();
                forgotEmailPopup.style.display = "block";
              }
            
              function closeForgotPopups() {
                forgotEmailPopup.style.display = "none";
                forgotCodePopup.style.display = "none";
                forgotResetPopup.style.display = "none";
              }
            
              async function sendResetCode() {
                const email = document.getElementById("forgotEmail").value.trim();
                const button = document.getElementById("sendCodeBtn");
                const btnText = button.querySelector(".btn-text");
                const spinner = button.querySelector(".loading-spinner");
              
                
                button.disabled = true;
                btnText.style.display = "none";
                spinner.style.display = "inline-block";
              
                try {
                  const res = await fetch("/forgot_password_code_send", {
                    method: "POST",
                    headers: { "Content-Type": "application/x-www-form-urlencoded" },
                    body: email=${encodeURIComponent(email)}
                  });
              
                  const data = await res.json();
                  alert(data.message);
              
                  if (data.status === "success") {
                    forgotEmailPopup.style.display